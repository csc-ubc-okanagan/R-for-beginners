<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Loading Data</title>

<script src="site_libs/header-attrs-2.14/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>






<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">R</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="part_1.html">R &amp; RStudio</a>
</li>
<li>
  <a href="part_2.html">Data Types</a>
</li>
<li>
  <a href="part_3.html">Functions &amp; Variables</a>
</li>
<li>
  <a href="part_4.html">Getting Help</a>
</li>
<li>
  <a href="part_5.html">Loading Data</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Loading Data</h1>

</div>


<div id="loading-data" class="section level1">
<h1>Loading Data</h1>
<p>We’re going to work with a (hopefully) fun data set today, which
we’ll download and then import.</p>
<p>First things first, we’ll use R to set up a place for us to work.
We’ll begin by creating a directory on our desktop</p>
<pre class="r"><code>dir.create(&quot;~/Desktop/r-for-beginners&quot;)</code></pre>
<p>We’ll then make sure that our current session is working with the
files in this folder.</p>
<pre class="r"><code>setwd(&quot;~/Desktop/r-for-beginners&quot;)</code></pre>
<p>And then we’ll download our data</p>
<pre class="r"><code>data_src &lt;- &quot;https://raw.githubusercontent.com/csc-ubc-okanagan/R-for-beginners/main/files/2018-cp_squirrel_census.csv&quot;
download.file(url = data_src, destfile = &#39;2018-cp_squirrel_census.csv&#39;)</code></pre>
<p>Now that our data is downloaded and we have a local copy, we’ll pull
it into R</p>
<p>We can simply import the data and display it to our console</p>
<pre class="r"><code>read.csv(&#39;2018-cp_squirrel_census.csv&#39;)</code></pre>
<p>But this isn’t terribly useful. We want to store this data in memory,
so we’ll load it into a variable</p>
<pre class="r"><code>sq_data &lt;- read.csv(&#39;2018-cp_squirrel_census.csv&#39;)</code></pre>
<p>We can now explore the data, looking at the data types and data
structures R is using when importing this csv file</p>
<pre class="r"><code>str(sq_data)</code></pre>
<pre><code>## &#39;data.frame&#39;:    3023 obs. of  31 variables:
##  $ X                                         : num  -74 -74 -74 -74 -74 ...
##  $ Y                                         : num  40.8 40.8 40.8 40.8 40.8 ...
##  $ Unique.Squirrel.ID                        : chr  &quot;37F-PM-1014-03&quot; &quot;21B-AM-1019-04&quot; &quot;11B-PM-1014-08&quot; &quot;32E-PM-1017-14&quot; ...
##  $ Hectare                                   : chr  &quot;37F&quot; &quot;21B&quot; &quot;11B&quot; &quot;32E&quot; ...
##  $ Shift                                     : chr  &quot;PM&quot; &quot;AM&quot; &quot;PM&quot; &quot;PM&quot; ...
##  $ Date                                      : int  10142018 10192018 10142018 10172018 10172018 10102018 10102018 10082018 10062018 10102018 ...
##  $ Hectare.Squirrel.Number                   : int  3 4 8 14 5 3 2 2 1 3 ...
##  $ Age                                       : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;Adult&quot; ...
##  $ Primary.Fur.Color                         : chr  &quot;&quot; &quot;&quot; &quot;Gray&quot; &quot;Gray&quot; ...
##  $ Highlight.Fur.Color                       : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ Combination.of.Primary.and.Highlight.Color: chr  &quot;+&quot; &quot;+&quot; &quot;Gray+&quot; &quot;Gray+&quot; ...
##  $ Color.notes                               : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;Nothing selected as Primary. Gray selected as Highlights. Made executive adjustments.&quot; ...
##  $ Location                                  : chr  &quot;&quot; &quot;&quot; &quot;Above Ground&quot; &quot;&quot; ...
##  $ Above.Ground.Sighter.Measurement          : int  NA NA 10 NA NA NA 0 0 0 30 ...
##  $ Specific.Location                         : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ Running                                   : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...
##  $ Chasing                                   : logi  FALSE FALSE TRUE FALSE FALSE FALSE ...
##  $ Climbing                                  : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...
##  $ Eating                                    : logi  FALSE FALSE FALSE TRUE FALSE FALSE ...
##  $ Foraging                                  : logi  FALSE FALSE FALSE TRUE TRUE TRUE ...
##  $ Other.Activities                          : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ Kuks                                      : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...
##  $ Quaas                                     : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...
##  $ Moans                                     : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...
##  $ Tail.flags                                : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...
##  $ Tail.twitches                             : logi  FALSE FALSE FALSE FALSE FALSE TRUE ...
##  $ Approaches                                : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...
##  $ Indifferent                               : logi  FALSE FALSE FALSE FALSE FALSE TRUE ...
##  $ Runs.from                                 : logi  FALSE FALSE FALSE TRUE FALSE FALSE ...
##  $ Other.Interactions                        : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ Lat.Long                                  : chr  &quot;POINT (-73.9561344937861 40.7940823884086)&quot; &quot;POINT (-73.9688574691102 40.7837825208444)&quot; &quot;POINT (-73.97428114848522 40.775533619083)&quot; &quot;POINT (-73.9596413903948 40.7903128889029)&quot; ...</code></pre>
<p>We can get slightly better access to the data itself with
<code>View()</code></p>
<pre class="r"><code>View(sq_data)</code></pre>
<p>This output tells us that we’re working with a data frame, that there
are 3023 rows or observations, and 31 columns or variables. It then
lists all of the variables, tells us what data type they were
interpreted as on import, and show us the first six values of each
variable.</p>
<p>Before digging much deeper into the data set, one of the first things
we’ll note is that there are a lot of missing values. Missing values
need to be properly encoded to be programatically useful. An application
- or user - may represent missing values in many ways. Sometimes it’s by
using an out of range value, so when a variable is binary, and values
are represented as 0 or 1, 99 is often used to indicate a missing value.
Files exported from SPSS might be encoded with a period -
<code>.</code>. In Excel, it’s extremely easy for a user to accidentally
introduce spaces - <code></code> - in an otherwise empty cell, or they
may choose to write the characters <code>NA</code>. A data base export
might include either <code>NA</code> or <code>NULL</code>.</p>
<p>When exported, especially using a format like <code>csv</code>, all
of these notations for missing values are converted to character strings
or numbers. Ideally, when importing into a piece of software, like R, we
would have a way to provide a list of possible ways of encoding missing
values and standardize how these are presented. In R, <code>NA</code>
values are a specific way of indicating that a value is missing. And
<code>read.csv()</code> has a specific argument for converting strings
into <code>NA</code> encoded values on import.</p>
<div class="exercise">
<p>Using the help documentation - <code>?read.csv</code> - see if you
can figure out how to update your data import -
<code>sq_data &lt;- read.csv('2018-cp_squirrel_census.csv')</code> - to
convert a list of strings to <code>NA</code> values.</p>
</div>
<div class="solution">
<pre class="r"><code>sq_data &lt;- read.csv(&#39;2018-cp_squirrel_census.csv&#39;, na.strings = c(&quot;&quot;, &quot; &quot;, &quot;NA&quot;, &quot;NULL&quot;, &quot;.&quot;, &quot;+&quot;))</code></pre>
</div>
<p>Review the data structure again…</p>
<pre class="r"><code>str(sq_data)</code></pre>
<pre><code>## &#39;data.frame&#39;:    3023 obs. of  31 variables:
##  $ X                                         : num  -74 -74 -74 -74 -74 ...
##  $ Y                                         : num  40.8 40.8 40.8 40.8 40.8 ...
##  $ Unique.Squirrel.ID                        : chr  &quot;37F-PM-1014-03&quot; &quot;21B-AM-1019-04&quot; &quot;11B-PM-1014-08&quot; &quot;32E-PM-1017-14&quot; ...
##  $ Hectare                                   : chr  &quot;37F&quot; &quot;21B&quot; &quot;11B&quot; &quot;32E&quot; ...
##  $ Shift                                     : chr  &quot;PM&quot; &quot;AM&quot; &quot;PM&quot; &quot;PM&quot; ...
##  $ Date                                      : int  10142018 10192018 10142018 10172018 10172018 10102018 10102018 10082018 10062018 10102018 ...
##  $ Hectare.Squirrel.Number                   : int  3 4 8 14 5 3 2 2 1 3 ...
##  $ Age                                       : chr  NA NA NA &quot;Adult&quot; ...
##  $ Primary.Fur.Color                         : chr  NA NA &quot;Gray&quot; &quot;Gray&quot; ...
##  $ Highlight.Fur.Color                       : chr  NA NA NA NA ...
##  $ Combination.of.Primary.and.Highlight.Color: chr  NA NA &quot;Gray+&quot; &quot;Gray+&quot; ...
##  $ Color.notes                               : chr  NA NA NA &quot;Nothing selected as Primary. Gray selected as Highlights. Made executive adjustments.&quot; ...
##  $ Location                                  : chr  NA NA &quot;Above Ground&quot; NA ...
##  $ Above.Ground.Sighter.Measurement          : int  NA NA 10 NA NA NA 0 0 0 30 ...
##  $ Specific.Location                         : chr  NA NA NA NA ...
##  $ Running                                   : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...
##  $ Chasing                                   : logi  FALSE FALSE TRUE FALSE FALSE FALSE ...
##  $ Climbing                                  : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...
##  $ Eating                                    : logi  FALSE FALSE FALSE TRUE FALSE FALSE ...
##  $ Foraging                                  : logi  FALSE FALSE FALSE TRUE TRUE TRUE ...
##  $ Other.Activities                          : chr  NA NA NA NA ...
##  $ Kuks                                      : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...
##  $ Quaas                                     : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...
##  $ Moans                                     : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...
##  $ Tail.flags                                : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...
##  $ Tail.twitches                             : logi  FALSE FALSE FALSE FALSE FALSE TRUE ...
##  $ Approaches                                : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...
##  $ Indifferent                               : logi  FALSE FALSE FALSE FALSE FALSE TRUE ...
##  $ Runs.from                                 : logi  FALSE FALSE FALSE TRUE FALSE FALSE ...
##  $ Other.Interactions                        : chr  NA NA NA NA ...
##  $ Lat.Long                                  : chr  &quot;POINT (-73.9561344937861 40.7940823884086)&quot; &quot;POINT (-73.9688574691102 40.7837825208444)&quot; &quot;POINT (-73.97428114848522 40.775533619083)&quot; &quot;POINT (-73.9596413903948 40.7903128889029)&quot; ...</code></pre>
<p>We’ll see a number of other things that we need to sort out before we
can do much with our data. For example, many of our variable of have not
been assigned to the appropriate data type. We have logical variables,
date variables etc not yet sorted. Let’s fix this.</p>
</div>
<div id="indexing-data-types" class="section level1">
<h1>Indexing &amp; Data Types</h1>
<p>To clean up our data set, we need to be able to target specifc
varibales and or specific values. We do this with indexing.</p>
<p>Data frames are comprised of rows and columns, and R accepts
arguments in this order, so if we want to see the intersectino of the
first row and the first column, we would run</p>
<pre class="r"><code>sq_data[1,1] # show the first row and first column of the data frame</code></pre>
<pre><code>## [1] -73.95613</code></pre>
<p>If we wanted to see the first 6 rows</p>
<pre class="r"><code>sq_data[1:6, 1] # show the first six rows and first column of the data frame</code></pre>
<pre><code>## [1] -73.95613 -73.96886 -73.97428 -73.95964 -73.97027 -73.96836</code></pre>
<p>And if we wanted to see all the values of a specific variable, or
column</p>
<pre class="r"><code>sq_data[ ,1]</code></pre>
<p>When working with a data frame, we can also use variable names</p>
<pre class="r"><code>sq_data[1:6, &quot;Running&quot;]</code></pre>
<p>And when we want every observation associated with a given
variable</p>
<pre class="r"><code>sq_data$Running</code></pre>
<div id="changing-data-types" class="section level2">
<h2>Changing Data Types</h2>
<p>Now that we can target a variable, we can assign new properties to
that variable. R has a series of <code>as.</code> functions to allow us
to manipulate data types and classes. To view all <code>as.</code>
functions available to you</p>
<pre class="r"><code>apropos(&quot;^as\\.&quot;)</code></pre>
<pre><code>##   [1] &quot;as.array&quot;                      &quot;as.array.default&quot;             
##   [3] &quot;as.call&quot;                       &quot;as.character&quot;                 
##   [5] &quot;as.character.condition&quot;        &quot;as.character.Date&quot;            
##   [7] &quot;as.character.default&quot;          &quot;as.character.error&quot;           
##   [9] &quot;as.character.factor&quot;           &quot;as.character.hexmode&quot;         
##  [11] &quot;as.character.numeric_version&quot;  &quot;as.character.octmode&quot;         
##  [13] &quot;as.character.POSIXt&quot;           &quot;as.character.srcref&quot;          
##  [15] &quot;as.complex&quot;                    &quot;as.data.frame&quot;                
##  [17] &quot;as.data.frame.array&quot;           &quot;as.data.frame.AsIs&quot;           
##  [19] &quot;as.data.frame.character&quot;       &quot;as.data.frame.complex&quot;        
##  [21] &quot;as.data.frame.data.frame&quot;      &quot;as.data.frame.Date&quot;           
##  [23] &quot;as.data.frame.default&quot;         &quot;as.data.frame.difftime&quot;       
##  [25] &quot;as.data.frame.factor&quot;          &quot;as.data.frame.integer&quot;        
##  [27] &quot;as.data.frame.list&quot;            &quot;as.data.frame.logical&quot;        
##  [29] &quot;as.data.frame.matrix&quot;          &quot;as.data.frame.model.matrix&quot;   
##  [31] &quot;as.data.frame.noquote&quot;         &quot;as.data.frame.numeric&quot;        
##  [33] &quot;as.data.frame.numeric_version&quot; &quot;as.data.frame.ordered&quot;        
##  [35] &quot;as.data.frame.POSIXct&quot;         &quot;as.data.frame.POSIXlt&quot;        
##  [37] &quot;as.data.frame.raw&quot;             &quot;as.data.frame.table&quot;          
##  [39] &quot;as.data.frame.ts&quot;              &quot;as.data.frame.vector&quot;         
##  [41] &quot;as.Date&quot;                       &quot;as.Date.character&quot;            
##  [43] &quot;as.Date.default&quot;               &quot;as.Date.factor&quot;               
##  [45] &quot;as.Date.numeric&quot;               &quot;as.Date.POSIXct&quot;              
##  [47] &quot;as.Date.POSIXlt&quot;               &quot;as.dendrogram&quot;                
##  [49] &quot;as.difftime&quot;                   &quot;as.dist&quot;                      
##  [51] &quot;as.double&quot;                     &quot;as.double.difftime&quot;           
##  [53] &quot;as.double.POSIXlt&quot;             &quot;as.environment&quot;               
##  [55] &quot;as.expression&quot;                 &quot;as.expression.default&quot;        
##  [57] &quot;as.factor&quot;                     &quot;as.formula&quot;                   
##  [59] &quot;as.function&quot;                   &quot;as.function.default&quot;          
##  [61] &quot;as.graphicsAnnot&quot;              &quot;as.hclust&quot;                    
##  [63] &quot;as.hexmode&quot;                    &quot;as.integer&quot;                   
##  [65] &quot;as.list&quot;                       &quot;as.list.data.frame&quot;           
##  [67] &quot;as.list.Date&quot;                  &quot;as.list.default&quot;              
##  [69] &quot;as.list.difftime&quot;              &quot;as.list.environment&quot;          
##  [71] &quot;as.list.factor&quot;                &quot;as.list.function&quot;             
##  [73] &quot;as.list.numeric_version&quot;       &quot;as.list.POSIXct&quot;              
##  [75] &quot;as.list.POSIXlt&quot;               &quot;as.logical&quot;                   
##  [77] &quot;as.logical.factor&quot;             &quot;as.matrix&quot;                    
##  [79] &quot;as.matrix.data.frame&quot;          &quot;as.matrix.default&quot;            
##  [81] &quot;as.matrix.noquote&quot;             &quot;as.matrix.POSIXlt&quot;            
##  [83] &quot;as.name&quot;                       &quot;as.null&quot;                      
##  [85] &quot;as.null.default&quot;               &quot;as.numeric&quot;                   
##  [87] &quot;as.numeric_version&quot;            &quot;as.octmode&quot;                   
##  [89] &quot;as.ordered&quot;                    &quot;as.package_version&quot;           
##  [91] &quot;as.pairlist&quot;                   &quot;as.person&quot;                    
##  [93] &quot;as.personList&quot;                 &quot;as.POSIXct&quot;                   
##  [95] &quot;as.POSIXct.Date&quot;               &quot;as.POSIXct.default&quot;           
##  [97] &quot;as.POSIXct.numeric&quot;            &quot;as.POSIXct.POSIXlt&quot;           
##  [99] &quot;as.POSIXlt&quot;                    &quot;as.POSIXlt.character&quot;         
## [101] &quot;as.POSIXlt.Date&quot;               &quot;as.POSIXlt.default&quot;           
## [103] &quot;as.POSIXlt.factor&quot;             &quot;as.POSIXlt.numeric&quot;           
## [105] &quot;as.POSIXlt.POSIXct&quot;            &quot;as.qr&quot;                        
## [107] &quot;as.raster&quot;                     &quot;as.raw&quot;                       
## [109] &quot;as.relistable&quot;                 &quot;as.roman&quot;                     
## [111] &quot;as.single&quot;                     &quot;as.single.default&quot;            
## [113] &quot;as.stepfun&quot;                    &quot;as.symbol&quot;                    
## [115] &quot;as.table&quot;                      &quot;as.table.default&quot;             
## [117] &quot;as.ts&quot;                         &quot;as.vector&quot;                    
## [119] &quot;as.vector.data.frame&quot;          &quot;as.vector.factor&quot;             
## [121] &quot;as.vector.POSIXlt&quot;</code></pre>
<p>We can see in the list, that we have several useful <code>as.</code>
functions for our current data set, including <code>as.Date</code> and
<code>as.logical</code>. We’ll start with the latter.</p>
</div>
<div id="convert-a-single-variable" class="section level2">
<h2>Convert a single variable</h2>
<pre class="r"><code>sq_data$Running &lt;- as.logical(sq_data$Running) # re-assign the variable Running from character to logical
str(sq_data$Running) # view the results</code></pre>
<pre><code>##  logi [1:3023] FALSE FALSE FALSE FALSE FALSE FALSE ...</code></pre>
</div>
<div id="convert-multiple-variables" class="section level2">
<h2>Convert multiple variables</h2>
<pre class="r"><code>variables_to_convert &lt;- c(&quot;Running&quot;, &quot;Chasing&quot;)
sq_data[,variables_to_convert] &lt;- lapply(sq_data[,variables_to_convert], as.logical)
str(sq_data$Chasing)</code></pre>
<pre><code>##  logi [1:3023] FALSE FALSE TRUE FALSE FALSE FALSE ...</code></pre>
<p>This is a steep introduction to vectorization in R.</p>
<p>Remember that a vector is just a simple list. Generally, when we do
one thing to something in a list it only impacts that one value - in
Excel we might double one value in a column, but this doesn’t double
every value in the column.</p>
<p>R is built from the ground up to apply changes to all values in a
list - known as vectorization. So, if we have a series of numbers - like
we created on earlier with <code>random_sample</code></p>
<pre class="r"><code>random_sample</code></pre>
<pre><code>##  [1]  4 75 92 14 31  6 56 32 42 15 59 18 62 37 26 87 20 53 22 40</code></pre>
<p>And we want to convert every value, we apply the conversion to the
entire vector</p>
<pre class="r"><code>(random_sample_doubled &lt;- random_sample * 2)</code></pre>
<pre><code>##  [1]   8 150 184  28  62  12 112  64  84  30 118  36 124  74  52 174  40 106  44
## [20]  80</code></pre>
<p>The <code>apply</code> family of functions does exactly the same
thing, but instead, in the case of <code>lapply</code>, taking in a
single object, like <code>random_sample</code>, it takes in a list of
objects - hence the <code>l</code> for <code>list apply</code> - and
applies a function to each object.</p>
<p>Reading out the above chunk of code then</p>
<pre class="r"><code>variables_to_convert &lt;- c(&quot;Running&quot;, &quot;Chasing&quot;) # create a character vector with the names of our variables

## create a list of variables - sq_data[, &quot;Running&quot;], sq_data[, &quot;Chasing&quot;] - that is fed
## into the lapply() function and apply the as.logical() function to each item
sq_data[,variables_to_convert] &lt;- lapply(sq_data[,variables_to_convert], as.logical)</code></pre>
<p>Writing code in this way can be extremely helpful, starting with a
plain language write up and then translating each piece to actual
code:</p>
<ol style="list-style-type: decimal">
<li>write a list of variables we want to change to a variable</li>
<li>index the data frame with the above variable</li>
<li>apply a function to this index</li>
</ol>
<p>Writing it like this also allows you to articulate your problem in a
language that can be searched if you don’t know how to complete a
specific step.</p>
<div class="note">
<p>Without vectorization, you would need to specify how to iterate over
each value in an object. Sometimes you still need to do this in R, so it
might be handy to see how this works. Working with a plain language
summary and using our <code>random_sample</code>:</p>
<ol style="list-style-type: decimal">
<li>create an object to hold our output - call it
<code>random_sample_multi</code></li>
<li>start an iteration that begins at index point 1 -
<code>random_sample[1]</code> - and ends at the final index point of the
object we’re working with - <code>random_sample[20]</code>, remembering
that writing <code>random_sample[1]</code> will output the value held at
that index point and that we don’t need to know the final index point,
as we can calculate this with <code>length()</code>.</li>
<li>populate the object we created in step one with the multiple of 2 of
each value held in each index point of <code>random_sample</code></li>
<li>print out the result to confirm</li>
</ol>
<pre class="r"><code>random_sample_multi &lt;- vector() # create an empty vector called random_sample_multi

for (i in 1:length(random_sample)) { # iterate with a for loop starting with the number 1 and ending with the last index point in random sample, calculated here using length()
  random_sample_multi[i] &lt;- random_sample[i] *2 # for each value at index point 1 through to length(random_sample), multiply that value by 2
}

random_sample_multi # print the result to verify</code></pre>
<pre><code>##  [1]   8 150 184  28  62  12 112  64  84  30 118  36 124  74  52 174  40 106  44
## [20]  80</code></pre>
</div>
<div class="exercise">
<p><code>read.csv</code> allows us to assign variable types on import.
Revisit the help documentation for <code>read.csv</code> and see if you
can update your import line -
<code>sq_data &lt;- read.csv('2018-cp_squirrel_census.csv', na.strings = c("", " ", "NA", "NULL", ".", "+"))</code>
to also convert the columns ‘Running’, ‘Chasing’, and “Climbing” to
logical on import.</p>
</div>
<div class="solution">
<pre class="r"><code>sq_data &lt;- read.csv(&#39;2018-cp_squirrel_census.csv&#39;,
                    na.strings = c(&quot;&quot;, &quot; &quot;, &quot;NA&quot;, &quot;NULL&quot;, &quot;.&quot;, &quot;+&quot;),
                    colClasses = c(&quot;Chasing&quot; = &quot;logical&quot;,
                                   &quot;Running&quot; = &quot;logical&quot;,
                                   &quot;Climbing&quot; = &quot;logical&quot;)
                    )</code></pre>
</div>
</div>
<div id="dates-and-factors" class="section level2">
<h2>Dates and Factors</h2>
<p>In addition to logical variables, our data set also has categorical
data and date data. Categorical data in R is called factor data. We’ll
convert a single variable to factor to see how this behaves.</p>
<pre class="r"><code>sq_data$Age &lt;- as.factor(sq_data$Age)
str(sq_data$Age)</code></pre>
<pre><code>##  Factor w/ 3 levels &quot;?&quot;,&quot;Adult&quot;,&quot;Juvenile&quot;: NA NA NA 2 2 2 2 2 2 2 ...</code></pre>
<pre class="r"><code>levels(sq_data$Age)</code></pre>
<pre><code>## [1] &quot;?&quot;        &quot;Adult&quot;    &quot;Juvenile&quot;</code></pre>
<p>This process highlights that we have one additional string character
that should be converted to <code>NA</code> on import - ?. Calling
<code>str</code> tells us that we have a factor with three levels or
categories. Calling <code>levels</code> lists those categories.</p>
<div class="exercise">
<p>Using the help page for <code>as.Date</code>, convert the Date
variable, currently structured as <code>int</code> to a date class
variable.</p>
</div>
<div class="solution">
<p><code>as.Date</code> requires a character input, so we must first
convert our variable to a chacter format</p>
<pre class="r"><code>sq_data$Date &lt;- as.character(sq_data$Date)</code></pre>
<p>Next, we need to specify to <code>as.Date</code> how our data is
structured - where the year, month, and date are articulated, and
whether the year is 4 digits or 2, and the months and days are
abbreviated.</p>
<pre class="r"><code>sq_data$Date &lt;- as.Date(sq_data$Date, &quot;%m%d%Y&quot;)</code></pre>
</div>
</div>
</div>
<div id="importing-with-a-data-dictionary" class="section level1">
<h1>Importing with a Data Dictionary</h1>
<p>The value of having a data dictionary in advance will go along ways
in facilitating this process.</p>
<p>A data dictionary generally describes key attributes about your data
- it will list your variables, provide a description of them, and
indicate the base type of data it is.</p>
<p>I have a very simple data dictionary for this project. Let’s load
that in</p>
<pre class="r"><code>dict_src &lt;- &quot;https://raw.githubusercontent.com/csc-ubc-okanagan/R-for-beginners/main/files/_datadictionary.csv&quot;
download.file(url = dict_src, destfile = &#39;_datadictionary.csv&#39;)
data_dict &lt;- read.csv(&quot;_datadictionary.csv&quot;)</code></pre>
<p>We’ll now import our data in a slightly more efficient way</p>
<pre class="r"><code>na_values &lt;- c(&quot;&quot; , &quot; &quot;, &quot;.&quot;, &quot;NA&quot;, &quot;NULL&quot;, &quot;?&quot;, &quot;+&quot;) # a list of values to use for na.strings
data_types &lt;- data_dict$data.import.class # a list of data types to feed to colClass
sq_data &lt;- read.csv(file = &quot;2018-cp_squirrel_census.csv&quot;,
         na.strings = na_values,
         colClasses = data_types
           )
str(sq_data)</code></pre>
<pre><code>## &#39;data.frame&#39;:    3023 obs. of  31 variables:
##  $ X                                         : num  -74 -74 -74 -74 -74 ...
##  $ Y                                         : num  40.8 40.8 40.8 40.8 40.8 ...
##  $ Unique.Squirrel.ID                        : chr  &quot;37F-PM-1014-03&quot; &quot;21B-AM-1019-04&quot; &quot;11B-PM-1014-08&quot; &quot;32E-PM-1017-14&quot; ...
##  $ Hectare                                   : chr  &quot;37F&quot; &quot;21B&quot; &quot;11B&quot; &quot;32E&quot; ...
##  $ Shift                                     : chr  &quot;PM&quot; &quot;AM&quot; &quot;PM&quot; &quot;PM&quot; ...
##  $ Date                                      : chr  &quot;10142018&quot; &quot;10192018&quot; &quot;10142018&quot; &quot;10172018&quot; ...
##  $ Hectare.Squirrel.Number                   : num  3 4 8 14 5 3 2 2 1 3 ...
##  $ Age                                       : Factor w/ 2 levels &quot;Adult&quot;,&quot;Juvenile&quot;: NA NA NA 1 1 1 1 1 1 1 ...
##  $ Primary.Fur.Color                         : Factor w/ 3 levels &quot;Black&quot;,&quot;Cinnamon&quot;,..: NA NA 3 3 3 2 3 3 3 3 ...
##  $ Highlight.Fur.Color                       : Factor w/ 10 levels &quot;Black&quot;,&quot;Black, Cinnamon&quot;,..: NA NA NA NA 5 10 NA NA NA 5 ...
##  $ Combination.of.Primary.and.Highlight.Color: Factor w/ 21 levels &quot;Black+&quot;,&quot;Black+Cinnamon&quot;,..: NA NA 14 14 19 13 14 14 14 19 ...
##  $ Color.notes                               : chr  NA NA NA &quot;Nothing selected as Primary. Gray selected as Highlights. Made executive adjustments.&quot; ...
##  $ Location                                  : Factor w/ 2 levels &quot;Above Ground&quot;,..: NA NA 1 NA 1 NA 2 2 2 1 ...
##  $ Above.Ground.Sighter.Measurement          : num  NA NA 10 NA NA NA 0 0 0 30 ...
##  $ Specific.Location                         : chr  NA NA NA NA ...
##  $ Running                                   : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...
##  $ Chasing                                   : logi  FALSE FALSE TRUE FALSE FALSE FALSE ...
##  $ Climbing                                  : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...
##  $ Eating                                    : logi  FALSE FALSE FALSE TRUE FALSE FALSE ...
##  $ Foraging                                  : logi  FALSE FALSE FALSE TRUE TRUE TRUE ...
##  $ Other.Activities                          : chr  NA NA NA NA ...
##  $ Kuks                                      : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...
##  $ Quaas                                     : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...
##  $ Moans                                     : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...
##  $ Tail.flags                                : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...
##  $ Tail.twitches                             : logi  FALSE FALSE FALSE FALSE FALSE TRUE ...
##  $ Approaches                                : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...
##  $ Indifferent                               : logi  FALSE FALSE FALSE FALSE FALSE TRUE ...
##  $ Runs.from                                 : logi  FALSE FALSE FALSE TRUE FALSE FALSE ...
##  $ Other.Interactions                        : chr  NA NA NA NA ...
##  $ Lat.Long                                  : chr  &quot;POINT (-73.9561344937861 40.7940823884086)&quot; &quot;POINT (-73.9688574691102 40.7837825208444)&quot; &quot;POINT (-73.97428114848522 40.775533619083)&quot; &quot;POINT (-73.9596413903948 40.7903128889029)&quot; ...</code></pre>
<p>At this point, we’ve got a pretty clean imported data set. It’s
likely we’ll still find some issues with, but for now let’s save it as a
cleaned, version 0</p>
<pre class="r"><code>write.csv(sq_data, &quot;2018-cp_squirrel_census_cleaned_v0.csv&quot;, row.names = FALSE)</code></pre>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
