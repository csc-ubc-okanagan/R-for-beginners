<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Adding &amp; Naming Variables</title>

<script src="site_libs/header-attrs-2.14/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>






<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">R for Beginners</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="part_1.html">R &amp; RStudio</a>
</li>
<li>
  <a href="part_2.html">Data Types</a>
</li>
<li>
  <a href="part_3.html">Functions &amp; Variables</a>
</li>
<li>
  <a href="part_4.html">Getting Help</a>
</li>
<li>
  <a href="part_5.html">Loading Data</a>
</li>
<li>
  <a href="part_6.html">Adding &amp; Naming Variables</a>
</li>
<li>
  <a href="part_7.html">Subsetting</a>
</li>
<li>
  <a href="part_8.html">Solutions</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Adding &amp; Naming Variables</h1>

</div>


<p>Occasionally we need to derive variables form existing information. A
good example of this is conversion between scales. With our current data
set, the variable “Above.Ground.Sight.Measurement” is ostensibly in feet
- the data dictionary could be clearer about this. To bring this to a
Canadian context, we might need these measurements in a metric
equivalent.</p>
<p>To do this, we could simply multiple the vector by 0.3048</p>
<pre class="r"><code>sq_data$Above.Ground.Sighter.Measurement &lt;- sq_data$Above.Ground.Sighter.Measurement * .3048</code></pre>
<p>It is generally good practice not to overwrite data however. At least
not while one is testing things out to makes sure they work!</p>
<p>An alternative approach would be to create a new variable and to
populate it with the converted values, this way we have the measurements
in their untouched imperial scale as well as their modified metric
scale.</p>
<p>This exercise will allow us to explore a couple of issues. The first
is that our variable names with this data set are often quite verbose,
not ideal for coding. So first we’ll make some changes to our variable
names, keeping in mind of course that this is something we should have
been thinking about from the beginning when we created our data
dictionary! In any case, this is good practice.</p>
<p>First, we’ll create a list of existing variable names for our data
set</p>
<pre class="r"><code>(sq_colnames &lt;- colnames(sq_data))</code></pre>
<pre><code>##  [1] &quot;X&quot;                                         
##  [2] &quot;Y&quot;                                         
##  [3] &quot;Unique.Squirrel.ID&quot;                        
##  [4] &quot;Hectare&quot;                                   
##  [5] &quot;Shift&quot;                                     
##  [6] &quot;Date&quot;                                      
##  [7] &quot;Hectare.Squirrel.Number&quot;                   
##  [8] &quot;Age&quot;                                       
##  [9] &quot;Primary.Fur.Color&quot;                         
## [10] &quot;Highlight.Fur.Color&quot;                       
## [11] &quot;Combination.of.Primary.and.Highlight.Color&quot;
## [12] &quot;Color.notes&quot;                               
## [13] &quot;Location&quot;                                  
## [14] &quot;Above.Ground.Sighter.Measurement&quot;          
## [15] &quot;Specific.Location&quot;                         
## [16] &quot;Running&quot;                                   
## [17] &quot;Chasing&quot;                                   
## [18] &quot;Climbing&quot;                                  
## [19] &quot;Eating&quot;                                    
## [20] &quot;Foraging&quot;                                  
## [21] &quot;Other.Activities&quot;                          
## [22] &quot;Kuks&quot;                                      
## [23] &quot;Quaas&quot;                                     
## [24] &quot;Moans&quot;                                     
## [25] &quot;Tail.flags&quot;                                
## [26] &quot;Tail.twitches&quot;                             
## [27] &quot;Approaches&quot;                                
## [28] &quot;Indifferent&quot;                               
## [29] &quot;Runs.from&quot;                                 
## [30] &quot;Other.Interactions&quot;                        
## [31] &quot;Lat.Long&quot;</code></pre>
<div class="exercise">
<p>This is a two parter.</p>
<p>First, re-label ‘Above.Ground.Sighter.Measurement’ to be more concise
and indicate its scale; in fact, re-label it to <code>agsm.f</code>.
This is a vector, so we’ll want to use indexing by number.</p>
<p>Second, using <code>colnames()</code>, update the variable names of
<code>sq_data</code> to match those now in the vector
<code>sq_colnames</code>.</p>
<p>A plain language approach to this might be:</p>
<ol style="list-style-type: decimal">
<li>Identify the index position of ‘Above.Ground.Sighter.Measurement’ in
<code>sq_colnames</code>.</li>
<li>Re-assign the value associated with this index point to
<code>agsm.f</code></li>
<li>Re-assign the variables of <code>sq_data</code> to
<code>sq_colnames</code></li>
</ol>
</div>
<p>We now have any easy variable name to type and adapt!</p>
<p>Creating a new variable in a dataframe is simply a matter of
assigning some values to the desired varibale.</p>
<pre class="r"><code>sq_data$agsm.m &lt;- sq_data$agsm.f * .3048 # create the variable agsm.m and populate it with the values in agsm.f times .3048</code></pre>
<div class="summary">
<p>Occasionally we need to rename variables, but when doing so we should
be wary about cascading impacts on our documentation. We can quite
easily add variables to an existing data set, when working with derived
values, this is a good approach.</p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
